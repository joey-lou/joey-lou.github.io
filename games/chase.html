<!--
  JLou's Home
  Copyright (c) 2022-2025 Joey Lou
  Licensed under the MIT License.
  
  Base Template - Primary layout template that all other templates extend
  
  Structure:
  - <head>: Meta tags, favicon, title, CSS and font imports
  - <body>: Navigation, content area, and footer
  - Scripts: Bootstrap JS and custom scripts
  
  Blocks that child templates can override:
  - head: Additional head content (styles, meta)
  - content: Main page content
  - scripts: Additional JavaScript imports
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- Favicon and Apple touch icon setup -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../static/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../static/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../static/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="../static/favicon/site.webmanifest" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JLou's Home</title>

    <!-- Theme toggle functionality -->
    <script type="module" src="../static/js/theme-toggle.js"></script>

    <!-- Bootstrap CSS and Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- CSS Variables and Base Styles -->
    <link rel="stylesheet" href="../static/css/variables.css" />
    <link rel="stylesheet" href="../static/css/styles.css" />

    <!-- Google Fonts import -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Single:wght@100..900&family=LXGW+WenKai+TC&display=swap"
      rel="stylesheet"
    />
    <!-- Google Analytics (if enabled) -->
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZRPJT5CNCH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-ZRPJT5CNCH');
    </script>
    

    <!-- Additional head content from child templates -->
    
<!-- Game-specific styles can be added in child templates -->

<link rel="stylesheet" href="../static/css/game.css" />
<style>
  #game-board {
    background: var(--game-board-simple-background);
  }
  #game-container {
    max-height: 800px;
    max-width: 800px;
  }
  #game-bar {
    max-width: 800px;
  }
</style>


<!-- Optional blog section styling (only loaded if game has a blog component) -->

<link
  id="pypigment-style"
  rel="stylesheet"
  type="text/css"
  href="../static/css/pypigments/solarized-light.css"
/>
<link
  id="blog-style"
  rel="stylesheet"
  type="text/css"
  href="../static/css/blogs.css"
/>
<!-- Include MathJax library for LaTeX in blog content -->
<script>
  MathJax = {
    tex: {
      inlineMath: [
        ['$', '$'],
        ['\\(', '\\)'],
      ],
    },
  };
</script>
<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
></script>
 
  </head>

  <body data-bs-theme="light" class="d-flex flex-column min-vh-100">
    <!-- Navigation bar with theme toggle -->
    <nav class="navbar sticky-top navbar-expand-md bg-secondary bg-opacity-50 px-5">
      <a class="navbar-brand" href="../index.html">About</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
        style="transform: scale(0.75)"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <a class="nav-item nav-link" href="../blogs/index.html">Blogs</a>
          <a class="nav-item nav-link" href="index.html">Games</a>
          <a class="nav-item nav-link" href="../tools/index.html">Tools</a>
        </ul>
        <!-- Theme toggle button -->
        <ul class="navbar-nav ms-auto">
          <button class="btn align-items-center" id="theme-toggle">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              fill="currentColor"
              class="bi bi-sun"
              viewBox="0 0 16 16"
            >
              <path
                d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"
              />
            </svg>
          </button>
        </ul>
      </div>
    </nav>

    <!-- Main content area -->
    <div id="content-wrapper">
      <div id="content-body">
        <!-- Page content from child templates -->
        
<!-- Navigation and footer trigger zones (will be activated by CSS if game-fs.css is loaded) -->
<div class="nav-trigger-zone" id="nav-trigger-zone"></div>
<div class="footer-trigger-zone" id="footer-trigger-zone"></div>

<!-- Game page wrapper to prevent scrolling -->
<div class="game-page-wrapper">
  <!-- Game content section -->
  
<div id="game-bar">
  <div class="d-flex align-items-center gap-3">
    <button id="info-btn" class="btn btn-outline-secondary active">Stats</button>
    <button id="reset-btn" class="btn btn-outline-secondary">Reset</button>
    <div class="d-flex align-items-center">
      <label for="speed-slider" class="me-2">Fox Speed:</label>
      <input
        type="range"
        id="speed-slider"
        class="form-range"
        min="100"
        max="150"
        value="105"
        style="width: 150px"
      />
      <span id="speed-value" class="ms-2">105%</span>
    </div>
  </div>
</div>
<div id="game-container">
  <canvas id="game-board"></canvas>
</div>

</div>

<!-- Optional blog explanation section -->

<div class="row">
  <div class="col-lg-8 col-md-10 mx-auto blog-content mt-5"><h1>Duck Chase</h1>
<p>Imagine our yellow dot is a duck swimming in a pond, and the red dot is a hungry fox. The fox circles around the pond to search for an opportunity to catch the duck. Duck is safe in the pond, but it needs to reach the shore to escape.</p>
<h2>Game Rules</h2>
<ol>
<li>Click anywhere on the canvas to move the duck to pointed location. </li>
<li>The fox (red) will chase the duck, such that it minimizes its distance to the duck.</li>
<li>If the duck reaches the shore without being caught, then you win!</li>
</ol>
<h3>Turn around and run?</h3>
<p>Intuitively, we may be tempted to run in the opposite direction of the fox and take the shortest path ashore.
But the speed of the fox is setup to be at least $\pi$ times duck's speed. Therefore, as duck moves towards the shore, fox will surely catch up.</p>
<h2>Solution</h2>
<details class="tip">
<summary>Hint</summary>
<p>
Try move along the grey circle within pond.</p>
</details>
<h3>Step One</h3>
<p>As you probably noticed, if duck moves along or outside the grey circle, it will maintain the same angle with the fox. This is because beyond the grey circle, angular velocity of the duck is the same as the fox $\omega_{duck} = \omega_{fox}$.</p>
<p>On the flip side, if duck moves within the grey circle, it can potentially increase its angle difference with the fox. This gives us an idea for a strategy: <strong>move spirally towards the grey circle from center of pond.</strong> </p>
<p>This way, duck can gradually increase its angle difference with the fox. In an ideal scenario, duck can reach a point on the grey circle that is at most $\pi$ or $180^\circ$ degrees away from the fox, marking the maximum angle and distance away from the fox.</p>
<h3>Step Two</h3>
<h4>Maybe take the shortest path now?</h4>
<p>Intuitively, we may think from this optimal point, duck should take the shortest path to shore. But is this really the best strategy?</p>
<p>Well, if you give it a try, you may find as we increase the speed of the fox, this strategy may not work as well.</p>
<h4>Optimize it!</h4>
<p>Assuming we followed step one, and we are at the optimal point (maximum angle/distance away from the fox), as shown in graph below. We can then formulate this problem of finding the optimal path from this point onwards into an optimization.</p>
<p><img alt="optimal_scenario" src="/static/images/games/chase/optimal_scenario.png" width="800px" /></p>
<p>As shown in plot, we will first define a few variables:</p>
<ul>
<li>$v_d$ to be duck's velocity, $v_f$ to be fox's and $\omega_f$ to be its angular velocity.</li>
<li>$r$ to be grey circle's radius, $R$ to be pond radius.</li>
<li>$\theta$ to be the potential angle duck takes to reach shore, while $\gamma$ being the angle fox will travel during the time duck takes to reach the shore.</li>
<li>$d$ being the distance duck travelled. </li>
</ul>
<p>From here, we can immediately derive a few relations:</p>
<ol>
<li>$\frac{r}{R} = \frac{v_d}{v_f}$</li>
<li>$d = \sqrt{(R \cos{\theta} - r)^2 + (R\sin{\theta})^2} = \sqrt{R^2 + r^2 - 2Rr\cos{\theta}}$ </li>
<li>$\gamma = \frac{d}{v_d}\omega_f = \frac{d}{v_d}\frac{v_f}{R} = \frac{d}{r}$</li>
</ol>
<p>We will define the objective as the final angle between duck and fox and aim to maximize it:
$$f(\theta) = \theta + \pi - \gamma  = \theta + \pi - \frac{\sqrt{R^2 + r^2 - 2Rr\cos\theta}}{r}, \text{where } 0\leq\theta\leq \arccos{\frac{r}{R}}.$$</p>
<blockquote>
<p><em>Side note on the limits, if $\theta\lt 0$, then it will certainly be worse for duck as it travels in direction of fox.
If $\theta\gt \arccos{\frac{r}{R}}$, which means duck travels beyond the tangent line, this will cause fox to chase in the opposite direction and resulting in a speedier catch/failure as well.</em> </p>
</blockquote>
<p>We can take derivative and attempt to solve for optimal solution (assume there is one).
$$f'(\theta) = 1 - \frac{R\sin\theta}{\sqrt{R^2 + r^2 - 2Rr\cos\theta}} = 0$$
With basic calculus, we get the following,
$$R^2\cos^2\theta - 2Rr\cos\theta + r^2 = 0$$
$$\theta = \arccos{\frac{r}{R}}$$
Meaning our upper limit for $\theta$ (intersection of tangent line to grey circle and the pond) happens to be a critical point.</p>
<p>To further confirm, we can also plot out the solution for case when $v_f = \pi v_d$.</p>
<p><img alt="solution" src="/static/images/games/chase/solution.png" width="800px" /></p>
<p><strong>The optimal path onwards is indeed to aim for an angle of $\theta = \arccos{\frac{r}{R}}$.</strong></p>
<h3>Conclusion</h3>
<p>The optimal strategy is as follows:</p>
<ol>
<li>Move spirally towards the grey circle from center of pond, until duck reaches maximum angle/distance away from the fox.</li>
<li>From that point, move along tangent line of grey circle to shore.</li>
</ol>
<p>Give it a try!</p></div>
</div>
 
      </div>
    </div>

    <!-- Footer with copyright info -->
    <footer class="bg-secondary bg-opacity-10 text-muted py-1 px-5 text-center">
      <small>
        Â© Joey Lou | 2022-2025
        <a href="https://github.com/joey-lou/joey-lou.github.io">GitHub</a></small
      >
    </footer>

    <!-- Bootstrap JS bundle -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>

    <!-- Initialize tooltips -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Initialize all tooltips
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        const tooltipList = [...tooltipTriggerList].map(
          (tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl)
        );
      });
    </script>

    <!-- Additional scripts from child templates -->
    
<!-- Auto-hide navigation and footer logic -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Check if game-fs.css is loaded (indicates full-screen game)
    const isFullScreenGame = document.querySelector('link[href*="game-fs.css"]');

    if (isFullScreenGame) {
      const navbar = document.querySelector('.navbar');
      const footer = document.querySelector('footer');
      const navTrigger = document.getElementById('nav-trigger-zone');
      const footerTrigger = document.getElementById('footer-trigger-zone');

      let navHideTimeout;
      let footerHideTimeout;

      // Navigation auto-hide logic
      const showNavbar = () => {
        clearTimeout(navHideTimeout);
        navbar.classList.add('navbar-visible');
      };

      const hideNavbar = () => {
        navHideTimeout = setTimeout(() => {
          navbar.classList.remove('navbar-visible');
        }, 800); // Hide after 0.8 seconds
      };

      // Footer auto-hide logic
      const showFooter = () => {
        clearTimeout(footerHideTimeout);
        footer.classList.add('footer-visible');
      };

      const hideFooter = () => {
        footerHideTimeout = setTimeout(() => {
          footer.classList.remove('footer-visible');
        }, 800); // Hide after 0.8 seconds
      };

      // Event listeners for navigation
      navTrigger.addEventListener('mouseenter', showNavbar);
      navbar.addEventListener('mouseenter', showNavbar);
      navbar.addEventListener('mouseleave', hideNavbar);

      // Event listeners for footer
      footerTrigger.addEventListener('mouseenter', showFooter);
      footerTrigger.addEventListener('mouseleave', hideFooter);
      footer.addEventListener('mouseenter', showFooter);
      footer.addEventListener('mouseleave', hideFooter);

      // Accessibility: show/hide on focus
      navbar.addEventListener('focusin', showNavbar);
      navbar.addEventListener('focusout', hideNavbar);
      footer.addEventListener('focusin', showFooter);
      footer.addEventListener('focusout', hideFooter);
    }
  });
</script>

<!-- Game-specific scripts -->

<script type="module" src="../static/js/games/chase/index.js"></script>
 
  </body>
</html>