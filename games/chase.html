<!--
  JLou's Personal Site
  Copyright (c) 2022-2024 Joey Lou
  Licensed under the MIT License.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../static/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../static/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="../static/favicon/favicon-16x16.png"
    />
    <link
      rel="manifest"
      href="../static/favicon/site.webmanifest"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JLou's Personal Site</title>
    <script
      type="module"
      src="../static/js/theme-toggle.js"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="../static/css/styles.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Arvo:ital,wght@0,400;0,700;1,400;1,700&family=Oxanium:wght@200..800&family=Oxygen:wght@300;400;700&display=swap" rel="stylesheet">
  
<link
    rel="stylesheet"
    href="../static/css/game.css"
/>

<style>
    #game-board {
        background: var(--game-board-simple-background);
    }
    #game-container {
        max-height: 800px;
        max-width: 800px;
    }
    #game-bar {
        max-width: 800px;
    }
</style>


<!-- if game contains a blog section, provide all the style and scripts for it. -->

<link
  id="pypigment-style"
  rel="stylesheet"
  type="text/css"
  href="../static/css/pypigments/solarized-light.css"
/>
<link
  id="blog-style"
  rel="stylesheet"
  type="text/css"
  href="../static/css/blogs.css"
/>
<!-- Include MathJax library for LaTeX -->
<script>
MathJax = {
    tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
};
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>



  </head>

  <body data-bs-theme="light" class="d-flex flex-column min-vh-100">
    <nav class="navbar sticky-top navbar-expand-lg bg-secondary bg-opacity-50 px-5">
      <a class="navbar-brand" href="../index.html">About</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <a class="nav-item nav-link" href="../blogs/index.html"
            >Blogs</a
          >
          <a class="nav-item nav-link" href="index.html"
            >Games</a
          >
        </ul>
        <ul class="navbar-nav ms-auto">
          <button class="btn align-items-center" id="theme-toggle">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sun" viewBox="0 0 16 16">
              <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
            </svg>
          </button>
        </ul>
      </div>
    </nav>
    <div id="content-wrapper" class="flex-grow-1 d-flex flex-column">
      <div id="content-body" class="flex-grow-1 px-3 py-3">
        

<div id="game-bar" class="mb-3">
    <div class="d-flex align-items-center gap-3">
        <button id="info-btn" class="btn btn-outline-secondary active">
            Stats
        </button>
        <button id="reset-btn" class="btn btn-outline-secondary">
            Reset
        </button>
        <div class="d-flex align-items-center">
            <label for="speed-slider" class="me-2">Fox Speed:</label>
            <input 
                type="range" 
                id="speed-slider" 
                class="form-range" 
                min="100" 
                max="150" 
                value="105" 
                style="width: 150px"
            >
            <span id="speed-value" class="ms-2">105%</span>
        </div>
    </div>
</div>
<div id="game-container">
    <canvas id="game-board"></canvas>
</div>


<div class="row">
    <div class="col-lg-8 col-md-10 mx-auto content mt-5">
        <h2>Duck Chase</h2>
<p>Imagine our yellow dot is a duck swimming in a pond, and the red dot is a hungry fox. The fox circles around the pond to search for an opportunity to catch the duck. Duck is safe in the pond, but it needs to reach the shore to escape.</p>
<h3>Game Rules</h3>
<ol>
<li>Click anywhere on the canvas to move the duck to pointed location. </li>
<li>The fox (red) will chase the duck, such that it minimizes its distance to the duck.</li>
<li>If the duck reaches the shore without being caught, then you win!</li>
</ol>
<h4>Turn around and run?</h4>
<p>Intuitively, we may be tempted to run in the opposite direction of the fox and take the shortest path ashore.
But the speed of the fox is setup to be at least $\pi$ times duck's speed. Therefore, as duck moves towards the shore, fox will surely catch up.</p>
<h3>Solution</h3>
<details class="tip">
<summary>Hint</summary>
<p>
Try move along the grey circle within pond.</p>
</details>
<h4>The Grey Circle</h4>
<p>As you probably noticed, if duck moves along or outside the grey circle, it will maintain the same angle with the fox. This is because beyond the grey circle, angular velocity of the duck is the same as the fox $\omega_{duck} = \omega_{fox}$.</p>
<p>But the flip side of this is that if duck moves inside the grey circle, it can potentially increase its angle difference with the fox. This gives us an idea for a strategy: <strong>move spirally towards the grey circle from center of pond.</strong> </p>
<p>This way, duck can gradually increase its angle difference with the fox. In an ideal scenario, duck can reach a point on the grey circle that is at most $\pi$ or $180^\circ$ degrees away from the fox, marking the maximum angle and distance away from the fox.</p>
<h4>Then what?</h4>
<p>Intuitively, we may think from this optimal point, duck should take the shortest path to shore. But is this really the best strategy?</p>
<p>Well, if you give it a try, you may find as we increase the speed of the fox, this strategy may not work as well.</p>
<h4>Optimal Path</h4>
<p>Below, we plot out the ideal scenario mentioned above. Where the yellow and red dots are the duck and fox at maximum angle/distance away from each other. We can then formulate this problem of finding the optimal path from this point onwards into an optimization.</p>
<p><img alt="optimal_scenario" src="/static/images/games/chase/optimal_scenario.png" width="800px" /></p>
<p>As shown in plot, we will first define a few variables:</p>
<ul>
<li>$v_d$ to be duck's velocity, $v_f$ to be fox's and $\omega_f$ to be its angular velocity.</li>
<li>$r$ to be grey circle's radius, $R$ to be pond radius.</li>
<li>$\theta$ to be the potential angle duck takes to reach shore, while $\gamma$ being the angle fox will travel during the time duck takes to reach the shore.</li>
<li>$d$ being the distance duck travelled. </li>
</ul>
<p>From here, we can immediately derive a few relations:</p>
<ol>
<li>$\frac{r}{R} = \frac{v_d}{v_f}$</li>
<li>$d = \sqrt{(R \cos{\theta} - r)^2 + (R\sin{\theta})^2} = \sqrt{R^2 + r^2 - 2Rr\cos{\theta}}$ </li>
<li>$\gamma = \frac{d}{v_d}\omega_f = \frac{d}{v_d}\frac{v_f}{R} = \frac{d}{r}$</li>
</ol>
<p>We will define the objective as the final angle between duck and fox and aim to maximize it:
$$f(\theta) = \theta + \pi - \gamma  = \theta + \pi - \frac{\sqrt{R^2 + r^2 - 2Rr\cos\theta}}{r}, \text{where } 0\leq\theta\leq \arccos{\frac{r}{R}}.$$</p>
<blockquote>
<p><em>Side note on the limits, if $\theta\lt 0$, then it will certainly be worse for duck as it travels in direction of fox.
If $\theta\gt \arccos{\frac{r}{R}}$, which means duck travels beyond the tangent line, this will cause fox to chase in the opposite direction and resulting in a speedier catch/failure as well.</em> </p>
</blockquote>
<p>We can take derivative and attempt to solve for optimal solution (assume there is one).
$$f'(\theta) = 1 - \frac{R\sin\theta}{\sqrt{R^2 + r^2 - 2Rr\cos\theta}} = 0$$
With basic calculus, we get the following,
$$R^2\cos^2\theta - 2Rr\cos\theta + r^2 = 0$$
$$\theta = \arccos{\frac{r}{R}}$$
Meaning our upper limit for $\theta$ (intersection of tangent line to grey circle and the pond) happens to be a critical point.</p>
<p>To further confirm, we can also plot out the solution for case when $v_f = \pi v_d$, where we can see the optimal path is indeed to aim for $\theta = \arccos{\frac{r}{R}}$.
<img alt="solution" src="/static/images/games/chase/solution.png" width="800px" /></p>
    </div>
</div>


      </div>
    </div>
    <footer class="bg-secondary bg-opacity-10 text-muted py-1 px-5 text-center">
      <small>
        Â© Joey Lou | 2022-2025
        <a href="https://github.com/joey-lou/joey-lou.github.io">GitHub</a></small>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    

    <script type="module" src="../static/js/games/chase/index.js"></script>


  </body>
</html>